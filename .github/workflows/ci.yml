# DO NOT EDIT! Generated by eval-github-yaml from .github/workflows/ci.ncl
{
  "concurrency": {
    "cancel-in-progress": true,
    "group": "ci-${{ github.ref }}"
  },
  "jobs": {
    "build-and-test": {
      "runs-on": "${{ matrix.os }}",
      "steps": [
        {
          "uses": "actions/checkout@v3"
        },
        {
          "name": "Installing Nix",
          "uses": "cachix/install-nix-action@v20",
          "with": {
            "extra_nix_config": "experimental-features = nix-command flakes",
            "nix_path": "nixpkgs=channel:nixos-unstable"
          }
        },
        {
          "name": "Setup Cachix",
          "uses": "cachix/cachix-action@v12",
          "with": {
            "authToken": "${{ secrets.CACHIX_TWEAG_NICKEL_AUTH_TOKEN }}",
            "name": "tweag-nickel"
          }
        },
        {
          "name": "Run nix flake check",
          "run": "nix flake check --print-build-logs"
        }
      ],
      "strategy": {
        "matrix": {
          "os": [
            "ubuntu-latest",
            "macos-latest"
          ]
        }
      }
    }
  },
  "name": "CI",
  "on": {
    "pull_request": {
      "branches": [
        "main"
      ]
    },
    "push": {
      "branches": [
        "main"
      ]
    }
  }
}